[General]
# Protocol example:
# This example shows how to use ESTNeT with a simple protocol
# The scenario simulates a satellite, that shall transmit data whenever 
# it is generated by the app. The transmissions are in the UHF band.
# The application in the satellite is generating 30 packets.


# NETWORK AND SIMULATION CONFIGURATION
network = estnet.SpaceTerrestrialNetwork
sim-time-limit = 600s

# start time as julian date
*.globalJulianDate.simulationStart = "2020-03-11T10:58:00.00+01:00Z"

# SATELLITE ORBIT
*.numS = 1 # number of satellites
*.sat[*].label = "Satellite"
*.sat[*].networkHost.mobility.positionPropagator.a = (6371km + 400km)
*.sat[*].networkHost.mobility.positionPropagator.e = 0
*.sat[*].networkHost.mobility.positionPropagator.i = 80deg
*.sat[*].networkHost.mobility.positionPropagator.raan = 320deg
*.sat[*].networkHost.mobility.positionPropagator.aop = 0
*.sat[0].networkHost.mobility.positionPropagator.v = 30deg


# GROUND STATION
*.numCg = 1     # number of ground stations
*.cg[0].networkHost.mobility.lat = 49.786844deg
*.cg[0].networkHost.mobility.lon = 9.980713deg
*.cg[0].networkHost.mobility.alt = 200m
*.cg[0].label = "Wuerzburg, Germany"


# VISUALIZATION
*.sat[*].osgNode.modelURL = "../../data/UWEModel.STL.500.scale.0,-90,0.rot"
*.cg[*].osgNode.modelURL = "../../data/UWEModel.STL.0,90,0.rot"
*.osgEarthScene.sceneModel = "../../data/blueMarble.earth"


# MEDIUM, RADIO AND BITRATE
*.mediumType = "inet.physicallayer.apskradio.packetlevel.ApskScalarRadioMedium"
*.radioMedium.propagation.typename = "estnet.radio.propagation.ConstantSpeedPropagationWithMovement"
*.radioMedium.analogModel.typename = "ScalarAnalogModel"
*.radioMedium.obstacleLoss.typename = "IdealObstacleLoss"

*.radioMedium.backgroundNoise.power = -134dBm # noise floor at 0deg, 10khz bw
*.radioMedium.mediumLimitCache.maxTransmissionDuration = 300ms
*.physicalEnvironment.config = xmldoc("../../data/earthObstacle.xml")

*.*.networkHost.wlan[*].radioType = "estnet.radio.apsk.APSKScalarRadioExtraStatistics"
*.*.networkHost.wlan[*].radio.transmitter.typename = "estnet.radio.gmsk.APSKScalarTransmitterWithGMSK"
*.*.networkHost.wlan[*].radio.receiver.typename = "estnet.radio.gmsk.APSKScalarReceiverWithGMSK"
*.*.networkHost.wlan[*].radio.centerFrequency = 437.385MHz
*.*.networkHost.wlan[*].radio.bandwidth = 10kHz
*.*.networkHost.wlan[*].radio.transmitter.preambleDuration = 0s
*.*.networkHost.wlan[*].radio.transmitter.headerLength = 1B
*.*.networkHost.wlan[*].radio.receiver.errorModel.typename = "estnet.radio.errormodel.PerfectErrorModel"
*.*.networkHost.wlan[*].radio.antenna.mobilityModule = "^.^.^.mobility"

*.*.networkHost.wlan[*].radio.receiver.energyDetection = -116dBm
*.*.networkHost.wlan[*].radio.receiver.sensitivity = -116dBm
*.*.networkHost.wlan[*].radio.receiver.snirThreshold = 17.82dB
*.*.networkHost.wlan[*].radio.antenna.typename = "IsotropicAntenna"
*.*.networkHost.wlan[*].bitrate = 9600bps

*.sat[*].networkHost.wlan[*].radio.transmitter.power = 2W
*.cg[*].networkHost.wlan[*].radio.transmitter.power = 15W


# TRACKING
*.sat[*].attitudeController.target = "EARTH_CENTER"
*.cg[*].trackingType = "estnet.node.tracking.target.TargetTracking"
*.cg[*].nodeTracking.target = "1"


# PROTOCOL
*.*.hostType = "estnet.protocol.simpleprotocol.SimpleProtocolNode"
*.*.networkHost.wlan[*].macType = "estnet.mac.ideal.IdealMacExtraStatistics"
*.*.networkHost.wlan[*].mac.ackTimeout = 300ms


# APPLICATION LAYER: DATA GENERATION
*.sat[0].networkHost.appWrapper[0].appType = "BasicApp"
*.sat[0].networkHost.appWrapper[0].app.sending = true
*.sat[0].networkHost.appWrapper[0].app.startTime = 140s
*.sat[0].networkHost.appWrapper[0].app.stopTime = 450s
*.sat[0].networkHost.appWrapper[0].app.sendInterval = 10s
*.sat[0].networkHost.appWrapper[0].app.destinationNodes = "2"
